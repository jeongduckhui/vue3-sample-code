const isEmptyCond = value =>
  value === null ||
  value === undefined ||
  value === '' ||
  value === false;

const parseMultiValue = value =>
  typeof value === 'string'
    ? value.split(',').map(v => v.trim()).filter(Boolean)
    : [];

const filterHandlers = {
  // 멀티 셀렉트 (a,b,c)
  status: (row, value) => {
    const values = parseMultiValue(value);
    return values.includes(row.status);
  },

  // 단일 선택
  type: (row, value) =>
    row.type === value,

  // boolean 조건
  vipOnly: (row, value) =>
    value ? row.vipYn === 'Y' : true,
};


const applyFilter = (data, searchCond) => {
  return data.filter(row =>
    Object.entries(searchCond).every(([key, value]) => {
      // 조건 미선택 → 통과
      if (isEmptyCond(value)) return true;

      const handler = filterHandlers[key];
      if (!handler) return true; // 정의 안 된 조건 무시

      return handler(row, value);
    })
  );
};


const onClickFilter = () => {
  const filtered = applyFilter(originData, searchCond);
  setRowData(filtered);
};
